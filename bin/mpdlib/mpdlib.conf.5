.TH MPDLIB.CONF 5 "10 Feb 2023" "0.1" "MPD Multi-Library Support"
.SH NAME
mpdlib.conf \- mpdlib.conf documentation
.SH DESCRIPTION
.PP
Configuration is set via \fBmpdlib.conf\fR\&. The script first searches for it
at \fB${XDG_CONFIG_HOME:~/.config}/mpd/mpdlib.conf\fR then at
\fB/etc/mpd.d/mpdlib.conf\fR\&. Note that when running at a global level, only
\fB/etc/mpd.d/mpdlib.conf\fR will be used.
.PP
See \fB/usr/share/doc/mpdlibconf.example\fR for an example configuration file.
.SH PATHS
.PP
Path definitions are more robust than in \fBmpd.conf\fR. \fBmpdlib\fR supports ~
and env variables with default values. The following are examples of valid
paths.
.sp
.RS
"~/.config/mpd/mpd.base.conf"
.br
"$HOME/.config/mpd/mpd.base.conf"
.br
"${XDG_CONFIG_HOME:-~/.config}/mpd/mpd.base.conf"
.RE
.SH REQUIRED PARAMETERS
.TP
\fBmpd_conf\fR
The location of \fBmpd.conf\fR file generated by \fBmpdlib\fR. Must be one of
the locations \fBmpd\fR searches for configuration files or else be specified
when starting \fBmpd\fR\&.
.TP
\fBbase_mpd_conf\fR
The location of the base \fBmpd.conf\fR file used to generate the final
\fBmpd.conf\fR to be used by \fBmpd\fR\&. Conventionally named
\fBmpd.base.conf\fR\& and located in same directory as \fBmpdlib.conf\fR\&.
Follows same spec as \fBmpd.conf(5)\fR\&.
.TP
\fBlibrary\fR
Specification for a library. Multiple \fBlibrary\fR sections may (and should --
that is the point of \fBmpdlib\fR after all) be specified. See the \fBLIBRARY
PARAMETERS\fR sections for required and optional parameters for each library
definition. Library parameters are grouped in blocks with curly braces:
.sp
.nf
library {
    name             \(dqmy_library\(dq
    default          \(dqtrue\(dq
    music_directory  \(dq/var/lib/mpd/my_library\(dq
    ...
}
.sp
library {
    name             \(dqmy_other_library\(dq
    default          \(dqfalse\(dq
    mpd_conf         \(dq$XDG_CONFIG_HOME/mpd/my_other_library.conf\(dq
    ...
}
.fi
.SH REQUIRED LIBRARY PARAMETERS
.TP
\fBname\fR
Specifies the name of the library. The name is used as input to \fBmpdlib\fR to
switch to the library. See \fBmpdlib(1)\fR\&.
.TP
\fBmpd_conf\fR OR \fBmusic_directory\fR
Exactly one of these parameters must be specified for each library. See
\fBOPTIONAL LIBRARY PARAMETERS\fR for more details on each parameter.
.SH OPTIONAL LIBRARY PARAMETERS
.TP
\fBmpd_conf\fR
Specifies an \fBmpd.conf\fR file to use for the library. In most cases, if a
value is unset in the library's \fBmpd.conf\fR, \fBmpdlib\fR will fall back to
the value in \fBmpd.base.conf\fR. This behavior can be suppressed with the
\fBignore_base_conf\fR option.
.IP
Either \fBmpd_conf\fR or \fBmusic_directory\fR must be specified for each library.
.TP
\fBdefault <true or false>\fR
Specifies whether this library should be switched to when \fBmpdlib\fR is
invoked with no \fBlibrary\fR argument. Defaults to \fBfalse\fR\&.
.TP
\fBignore_base_conf\fR
If \fBtrue\fR, only fields set in the library configuration will be used.
Defaults to \fBfalse\fR\&.
.TP
\fBmusic_directory\fR
Specifies the music directory to use for the library. See \fBmpd.conf(5)\fR for
more details on how this field is interpreted by \fBmpd\fR\&.
.IP
Either \fBmpd_conf\fR or \fBmusic_directory\fR must be specified for each
library.
.TP
\fBdb_file\fR
If unset, defaults to the \fBdb_file\fR value set in \fBmpd.base.conf\fR with
\fB_{library_name}\fR appended to the end. If \fBdb_file\fR is unset in both the
library config and \fBmpd.base.conf\fR, it will be empty. See \fBmpd.conf(5)\fR
for more details on how this field is interpreted by \fBmpd\fR\&.
.TP
\fBstate_file\fR
If unset, defaults to the \fBstate_file\fR value set in \fBmpd.base.conf\fR with
\fB_{library_name}\fR appended to the end. If \fBstate_file\fR is unset in both
the library config and \fBmpd.base.conf\fR, it will be empty. See
\fBmpd.conf(5)\fR for more details on how this field is interpreted by
\fBmpd\fR\&.
.TP
\fBplaylist_directory\fR
Specifies the playlist directory to use for the library. Either \fBmpd_conf\fR or
\fBmusic_directory\fR must be specified for each library. See \fBmpd.conf(5)\fR
for more details on how this field is interpreted by \fBmpd\fR\&.
.SH FILES
.TP
.B \fBlibrary_mpd.conf\fP
Library-specific \fBmpd\fR configuration file following the \fBmpd.conf(5)\fR
spec. Referenced with the \fBmpd_conf\fR library parameter.
.TP
.B \fB${XDG_CONFIG_HOME:-~/.config}/mpd/mpdlib.conf\fP
User configuration file (usually \fB~/.config/mpd/mpdlib.conf\fP).
.TP
.B \fB/etc/mpd.d/mpdlib.conf\fP
Global configuration file.
.SH SEE ALSO
\fBmpdlib(1)\fR, \fBmpd(1)\fR, \fBmpd.conf(5)\fR
.SH BUGS
.IP \(bu 2
existing configs must exist in \fBmpd.base.conf\fP\& for any parameters defined
in library configurations.
.IP \(bu 2
library-level \fBmpd.conf\fP is not supported yet.
.IP \(bu 2
parameters other than the handful specified here are not supported yet.
.SH AUTHOR
David Anderson (voskresenie)
